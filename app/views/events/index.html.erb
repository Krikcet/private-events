<h1>Events</h1>

<div id="events">
  <% unless !user_signed_in? %>
  <h2>Upcoming Events</h2>
  <% @events.upcoming.each do |event| %>
    <h3><%= event.title %></h3>
    <p><b>Created by:</b> <%= event.creator.username %></p>
    <p><b>Date:</b> <%= event.date %></p>
    <p><b>Location:</b> <%= event.location %></p>
    <% if user_signed_in? && event.creator.id == current_user.id %>      
    <p>
      <%= link_to 'Edit this event', edit_event_path(event), class: "btn btn-primary" %>
    </p>
    <% end %>    
    <p>
      <%= link_to "Show this event", event, class: "btn btn-primary" %>
    </p>
  <% end %>
  <h2>Past Events</h2>
  <% @events.past.each do |event| %>
    <% if event.invited_users.include?(current_user) || event.creator.id == current_user.id %>
      <h3><%= event.title %></h3>
      <p><b>Created by:</b> <%= event.creator.username %></p>
      <p><b>Date:</b> <%= event.date %></p>
      <p><b>Location:</b> <%= event.location %></p>    
      <%= link_to "Show this event", event, class: "btn btn-primary" %>
    <% else %>
      <h3>Private Event</h3>
      <p>You must be invited to see details.</p>
    <% end %>
    <p>
    </p>
    <% end %>
  <% else %>
    <p><b>SIGN IN TO SEE EVENTS</b></p>
  <% end %>
</div>

<%= link_to "New event", new_event_path, class: "btn btn-primary" %>
